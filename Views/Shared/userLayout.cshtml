@using System.Security.Claims;
 @model online_sms.Models.Contact;

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, shrink-to-fit=no">
    <title>Dashboard | SMS ARC</title>




    <link href="~/assets/user/css/loader.css" rel="stylesheet" type="text/css" />
    <script src="~/assets/user/js/loader.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Quicksand:400,500,600,700&display=swap" rel="stylesheet">
    <link href="~/assets/user/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/user/css/plugins.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/user/plugins/apex/apexcharts.css" rel="stylesheet" type="text/css">
    <link href="~/assets/user/css/dashboard/dash_2.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/user/css/elements/tooltip.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="~/assets/user/css/elements/alert.css">
    <link href="~/assets/user/css/users/account-setting.css" rel="stylesheet" type="text/css" />
    <script src="https://kit.fontawesome.com/3aeca4f384.js" crossorigin="anonymous"></script>
    <script src="~/assets/user/plugins/sweetalerts/promise-polyfill.js"></script>
    <link href="~/assets/user/plugins/sweetalerts/sweetalert2.min.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/user/plugins/sweetalerts/sweetalert.css" rel="stylesheet" type="text/css" />
    <link href="~/assets/user/css/components/custom-sweetalert.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="~/assets/user/plugins/bootstrap-select/bootstrap-select.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <!-- Select2 css  -->

    <link href="~/assets/user/plugins/select2/css/select2.min.css" rel="stylesheet">

    <!-- Internal Gallery css-->
    <link href="~/assets/user/plugins/gallery/gallery.css" rel="stylesheet">
    <link rel="stylesheet" href="~/assets/user/css/dashboard/chat.css">
    <style>
        .apexcharts-tooltip {
            display: none;
        }
    </style>

</head>
<body>

    <!--  BEGIN NAVBAR  -->
    <div class="header-container">
        <header class="header navbar navbar-expand-sm">

            <a href="javascript:void(0);" class="sidebarCollapse" data-placement="bottom"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></a>
            <div class="nav-logo align-self-center">
                <a class="navbar-brand" href=""><img alt="logo" src="~/assets/user/img/logo.png" style="width:auto; max-width:150px; height:auto;" alt="SMS Arc"></a>
            </div>

            <ul class="navbar-item flex-row mr-auto">
            </ul>

            <ul class="navbar-item flex-row nav-dropdowns">


                <li class="nav-item dropdown user-profile-dropdown order-lg-0 order-1">
                    <a href="javascript:void(0);" class="nav-link dropdown-toggle user" id="user-profile-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <div class="media">
                            <div class="media-body align-self-center">
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <h6><span>Welcome, @User.FindFirst(ClaimTypes.Name)?.Value</span></h6>
                                }
                            </div>
                        </div>                      
                </li>
            </ul>
        </header>
    </div>
    <!--  END NAVBAR  -->
    <!--  BEGIN TOPBAR  -->
    <div class="topbar-nav header navbar" role="banner">
        <nav id="topbar">
            <ul class="navbar-nav theme-brand flex-row  text-center">
                <li class="nav-item theme-logo">
                    <a href="">
                        <img src="~/assets/user/img/logo.png" class="navbar-logo" alt="logo" style="width:auto;max-width: 140px; height:auto!important;">
                    </a>
                </li>
            </ul>

            <ul class="list-unstyled menu-categories" id="topAccordion">

                <li class="menu single-menu active">
                    <a asp-action="Index" asp-controller="userdata" class="">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-home"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                            <span>Dashboard</span>
                        </div>
                    </a>
                </li>

                <li class="menu single-menu">
                    <a asp-action="Inbox" asp-controller="userdata" class="">
                        <div class="">
                            &nbsp; <i class="fa fa-comments" style="font-size:18px;"></i>&nbsp;

                            <span>Chat</span>
                        </div>
                    </a>
                </li>
                <li class="menu single-menu"   >
                    <a class="" data-bs-toggle="modal" style="cursor:pointer;" data-bs-target="#exampleModal">
                        <div class="">
                            &nbsp; <i class="fa fa-mobile-alt" style="font-size:18px;color:#6259ca;"></i>&nbsp;
                            <span>Add Contact</span>
                        </div>
                    </a>
                </li>
                <li class="menu single-menu">
                    <a href="#more" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <div class="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-plus-circle"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="16"></line><line x1="8" y1="12" x2="16" y2="12"></line></svg>
                            <span>More</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down"><polyline points="6 9 12 15 18 9"></polyline></svg>
                    </a>
                    <ul class="collapse submenu list-unstyled" id="more" data-parent="#topAccordion">
                       
                        @if (User.Identity.IsAuthenticated)
                        {
                        <li>
                                <a asp-action="Profile" asp-controller="userdata" asp-route-id="@User.FindFirst(ClaimTypes.Sid)?.Value"> My Profile</a>
                        </li>   
                        }
                        <li>
                            <a data-bs-toggle="modal" data-bs-target="#myContact"> My Contacts</a>
                        </li>
                        <li>
                            <a asp-action="Logout" asp-controller="userdata"> Logout</a>
                        </li>
                    </ul>
                </li>
                <li class="menu single-menu">
                    <a class="" data-bs-toggle="modal" id="friendPost" data-bs-target="#requests">
                        <div class="">                         
                            <span>Requests</span>
                        </div>
                    </a>
                </li>
            </ul>
        </nav>
    </div>


    @RenderBody()


    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Add Contact</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form asp-controller="userdata" asp-action="Index">
                        <div class="mb-3">
                            <label asp-for="FirstName" class="col-form-label">First Name:</label>
                            <input asp-for="FirstName" type="text" class="form-control" id="first-name" required />
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="LastName" class="col-form-label">Last Name:</label>
                            <input asp-for="LastName" type="text" class="form-control" id="last-name" required />
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="ContactNumber" class="col-form-label">Contact Number:</label>
                            <input asp-for="ContactNumber" type="number" class="form-control" id="contact-number" required />
                            <span asp-validation-for="ContactNumber" class="text-danger"></span>
                        </div>
                        <div class="mb-3 d-flex align-items-center justify-content-end ">
                            <button type="submit" class="btn btn-primary">Add Contact</button>
                        </div>
                    </form>
                </div>
               
            </div>
        </div>
    </div>

    <div class="modal fade" id="myContact" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Contacts</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                            <button class="btn btn-primary   active  " id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#friends" type="button" role="tab" aria-controls="friends" aria-selected="false">Friends</button>
                            <button class="btn btn-primary   ms-2" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab" aria-controls="contact" aria-selected="true">Contacts</button>
                            <button class="btn btn-primary   ms-2" id="nav-sugested-tab" data-bs-toggle="tab" data-bs-target="#suggested_user" type="button" role="tab" aria-controls="suggested_user" aria-selected="true">Suggested Friends</button>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="friends" role="tabpanel" aria-labelledby="nav-profile-tab" tabindex="0">
                            <ul class="list-group">

                            </ul>
                        </div>
                        <div class="tab-pane fade " id="contact" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
                            <ul class="list-group">
                               
                               
                            </ul>
                        </div>
                        <div class="tab-pane fade " id="suggested_user" role="tabpanel" aria-labelledby="nav-home-tab" tabindex="0">
                            <ul class="list-group">
                            </ul>
                        </div>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="requests" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="exampleModalLabel">Friend Requests</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="getFrnd" >

                    <ul class="list-group">

                    </ul>

                </div>

            </div>
        </div>
    </div>


    <div class="footer-wrapper">
        <div class="footer-section f-section-1">
            <p class="">Copyright &copy; 2020 SMS ARC, <a target="_blank" href="https://onamal.com">Onamal Inc.</a> All rights reserved.</p>
        </div>
        <div class="footer-section f-section-2">
            <p class=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-heart"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg></p>
        </div>
    </div>

    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="~/assets/user/js/libs/jquery-3.1.1.min.js"></script>
    <script src="~/assets/user/bootstrap/js/popper.min.js"></script>
    <script src="~/assets/user/bootstrap/js/bootstrap.min.js"></script>
    <script src="~/assets/user/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
    <script src="~/assets/user/js/app.js"></script>
    <script>
        $(document).ready(function () {
            App.init();
        });
    </script>
    <script src="~/assets/user/js/custom.js"></script>
    <!-- END GLOBAL MANDATORY SCRIPTS -->
    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->
    <script src="~/assets/user/plugins/apex/apexcharts.min.js"></script>
    <script src="~/assets/user/js/dashboard/dash_2.js"></script>
    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM SCRIPTS -->

    <script src="~/assets/user/plugins/bootstrap-select/bootstrap-select.min.js"></script>

    <script src="~/assets/user/plugins/sweetalerts/sweetalert2.min.js"></script>
    <script src="~/assets/user/plugins/sweetalerts/custom-sweetalert.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/list.js/1.1.1/list.min.js'></script>
    @* <script src="~/assets/user/js/dashboard/chat.js"></script> *@
   
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#nav-home-tab').on('click', function () {
                $.ajax({
                    url: '/userdata/GetContacts',
                    type: 'GET',
                    success: function (data) {
                        $('#contact').html(data); // Load the returned partial view into the #contact div
                    },
                    error: function () {
                        alert('Failed to load contacts.');
                    }
                });
            });
            $('#nav-sugested-tab').on('click', function () {
                $.ajax({
                    url: '/userdata/GetSuggested',
                    type: 'GET',
                    success: function (data) {
                        $('#suggested_user').html(data); // Load the returned partial view into the #contact div
                    },
                    error: function () {
                        alert('Failed to load contacts.');
                    }
                });
            });
            $('#friendPost').on('click', function () {
                $.ajax({
                    url: '/userdata/GetFriendRequest',
                    type: 'GET',
                    success: function (data) {
                        $('#getFrnd').html(data); // Load the returned partial view into the #getFrnd div
                    },
                    error: function () {
                        alert('Failed to load friend requests.');
                    }
                });
            });

        });

            function GetFriend() {
                $.ajax({
                    url: '/userdata/GetFriendsAll',
            type: 'GET',
            success: function (data) {
                $('#friends').html(data); // Load the returned partial view into the #getFrnd div
                },
                    error: function () {
                        alert('Failed to load friend requests.');
                    }
                });
            }
                     setInterval(() => {
                        GetFriend();
            }, 2000)

    </script>
    
    <script>
        $(".phone_input").inputmask({
            mask: "(999) 999-9999"
        });
    </script>



    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
